/*
 Ocean Daemon by Seeker 06/02/2000
*/
/* You can modify anything below this line in the ocean */
string *ocean_map = ({
"*****************************************************************************",
"*---------------------------------------------------------------------------*",
"*---------------------------------------------------------------------------*",
"*-------+++--++++--------------------+++------------------------------------*",
"*--------+++++++++++------------++++++++++-----+++--------------------------*",
"*--------+++++++++++++++-----+++++++++++++++--+++---------------------------*",
"*-------++++++++++++++++++--+++++++++++++++++++++B------------++------------*",
"*-------++++++++++++++++++++++++++++++++++++++++++----------+++++-----------*",
"*--------++++++++++++++++++++++++++++++++++++++++---------++++++++----------*",
"*--------++++++++++++++++++++++++++++++++++++++----------++++++++-----------*",
"*---------++++++++++++++++++++++++++++++++++++-----------+++++++------------*",
"*----------+++++++++++++++++++++++++++++++++++------------++++++++----------*",
"*-----------++++++++++++++++++++++++++++++++++++-----------+++++++----------*",
"*-----------+++++++++++++++++++++++++++++++++++++-----------+++++++---------*",
"*----------+++++++++++++++++++++++++++++++++++++--------------++++----------*",
"*----------++++++++++++++++++++++++++++++++++++++--------------++j----------*",
"*--------+++++++++++++++++++++++++++++++++++++++++--------------------------*",
"*-------+++++++++++++++++++++++++++++++++++++++++++-------------------------*",
"*------d++++------++++++-----+++A+++--a------+++++++------------------------*",
"*-------+++------------------------------------+++++------------------------*",
"*-----------------------------------------------+++-------------------------*",
"*------------------------------------------------+--------------------------*",
"*---------------------------------------------------------------------------*",
"*----++---c+++--------------------------------------------------------------*",
"*---+++++++++++-------------------------------------------------------------*",
"*---+++++++++++----------------------------------++-------------------------*",
"*------++++++++------------------------+---------+--------------------------*",
"*-----------++-------------------------+-------------------------+----------*",
"*--------------------------------------+-------------------------++---------*",
"*--------------------------------------+--------------------------++--------*",
"*---------+++--------------------------h---------------------------++-------*",
"*----+++++++++-------------------------------------------------+----i+------*",
"*---+++++++++++-----------------------------------------------+++-----------*",
"*---+++++++++++---+e-----g+----------------------------------+++++----------*",
"*----++++++++b----+++-++--+----------------------------------++++-----------*",
"*----++++++++------------------------------+++------------++++++++----------*",
"*-------++++-----+f--++-----------------+++++++++-------+++++++++-----------*",
"*----------------+-----------++++----++++++++++++++---++++++++++++----------*",
"*---------------------------+++++++++++++++++++++++++++++++++++++++---------*",
"*--------------------------+++++++++++++++++++++++++++++++++++++++----------*",
"*---------------------------++++++++++++++++++++++++++++++++++++++----------*",
"*---------------------------++++++++++++++++++++++++++++++++++++------------*",
"*--------------------------+++++++++++++++++++++++++++++++++++--------------*",
"*--------------------------++++++++++++++++++++++++++++++++++++-------------*",
"*---------------------------++++++++++++++++++++++++++++++++++++------------*",
"*----------------------------++++++++++++++++++++++++++++++++++++-----------*",
"*----------------------------+++++++++++++++++++++++++++++++++++++----------*",
"*----------------------------++++++++++++++++++++++++++++++++++++-----------*",
"*----------------------------++++++++++++++++++++++---------+++++++---------*",
"*-----------------------------++++++++++++++++++++-------------++++---------*",
"*------------------------------++++--+++++++++++-----+++--------++----------*",
"*-------------------------------+++----++++++++-----+++--------+------------*",
"*----------------------------------------++++++------+++--------------------*",
"*------------------------------------------+++++----------------------------*",
"*--------------------------------------------++++---------------------------*",
"*---------------------------------------------------------------------------*",
"*****************************************************************************"
});
/* 
   +-------------------+
   |        Key        |
   +-------------------+
   |                   |
   | land           +  |
   | water          -  |
   | fast currents  *  |
   | ??????         #  |
   +-------------------+
*/
 
#define ZERO ({ 34, 26 })
 
// This is places that need rafts to get to the island and back
// no docks. (these places use lowercase letters)
mapping beach = ([ "a" : "/d/tirun/beach2",
                   "b" : "/d/merkkerri/jungle/merkkirri/mjungle1",
                   "c" : "/wizards/powerman/room/patha",
                   "d" : "/d/shadow/rooms/entrance.c",
                   "e" : "/d/keys/til/beach",
                   "f" : "/d/keys/sorn/beach",
                   "g" : "/d/keys/dou/beach",
                   "h" : "/d/keys/sand/beach",
                   "i" : "/d/keys/great_sand/beach",
                   "j" : "/d/purgatory/room/landing" ]);
// This is the places that have docks and the boat can <sail land> to,
// no rafts needed to get to the land or island 
// (these places use uppercase letters)
mapping docks = ([ "A" : "/d/tirun/loadb",
                   "B" : "/d/helgrath/rooms/forest_pier",]);
 
 
/* --- Dont mess with anything below this line ----- */
 
 
#include <std.h>
#include <daemons.h>
#include <ocean.h>
 
static int MAX_OCEAN_X = sizeof(ocean_map[0]);
static int MAX_OCEAN_Y = sizeof(ocean_map);
int *get_graphcoord_from_mudcoord(int *coord)
{
 int x2,y2,x1,y1, *i, x3,y3;
 x2 = coord[0]; y2 = coord[1];
 i = OCEAN_D->query_zero();
 x1 = i[0]; y1 = i[1];
 x3 = x2-x1;
 y3 = y1 - y2;
 return ({x3, y3});
}
int *get_mudcoord_from_graphcoord(int *coord)
{
 int x2,y2, x1, y1, *i, x3, y3;
 x2 = coord[0]; y2 = coord[1];
 i = OCEAN_D->query_zero();
 x1 = i[0]; y1 = i[1];
 
 x3 = x2 - x1;
 y3 = y1 - y2;
 return ({ x3 , y3 });
}
 
int *query_coord_from_letter(string str)
{
 int a, y;
 a = MAX_OCEAN_Y;
 while(a--)
  {
   if (strsrch(ocean_map[a], str)!=-1)
     {
      y = a;
      a = sizeof(ocean_map[a]);
      while(a--)
       if (ocean_map[y][a..a]==str)
         return ({a,y});
     }
  }
 return ({});
}
int *query_zero() { return ZERO; }
int valid_xy(int x, int y)
{
 if (x>=MAX_OCEAN_X || y>=MAX_OCEAN_Y || x<=0 || y<=0)
   return STRONG_CURRENTS;
 
 if (ocean_map[y][x..x]=="*") return STRONG_CURRENTS;
 if (ocean_map[y][x..x]=="+") return LAND;
 return OK_TO_MOVE;
}
string get_xy(int x, int y)
{
 
 return ocean_map[y][x..x];
}
string get_beach(string a)
{
 return beach[a];
}
string get_docks(string a)
{
 return docks[a];
}
