#include <std.h>
#include <wildflower.h>
inherit ROOM;
 
int cmd_start(string str);
 
void init()
{
    ::init();
    add_action("cmd_start", "start");
}
 
void create() {
room::create();
 set_properties( ([ "no attack"   : 1,
                    "no magic"    : 1,
                    "no bump"     : 1,
                    "light"       : 2,
                    "night light" : 2,
                    "no teleport" : 1,
                    "no scry" : 1,
                    "indoors" : 1,
                    "no steal"    : 1 ]) );
    set_short("An ominous passageway");
    set_day_long(
      "The long sloping hallway leads downward and deeper into "
      "the dark shadows.  Mysteriously, a soft amber light creeps "
      "down the walls with long stretching fingers guiding the way "
      "further in.  Shadows hunger for fresh prey, but are held "
      "obedient to the strange light above.  A lit gem illuminates "
      "around a large form trapped inside.  This seems to be a place "
      "of worship."
    );
    set_night_long(
      "The long sloping hallway leads downward and deeper into "
      "the dark shadows.  Mysteriously, a soft amber light creeps "
      "down the walls with long stretching fingers guiding the way "
      "further in.  Shadows hunger for fresh prey, but are held "
      "obedient to the strange light above.  A lit gem illuminates "
      "around a large form trapped inside.  This seems to be a place "
      "of worship."
    );
    set_items(([
        "hallway" : "It leads underneath an upturned long finger.",
        "shadows" : "They are transfixed to the light above while "
                    "gathering in the darkness the form inside "
                    "creates",
        "light" : "The actual sorce of the light seems to be "
                  "generated by the gem itself.  A large form "
                  "inside, casts long shadows that look like a "
                  "hand ready to snatch something precious.",
        "walls" : "Feel alive as the shadows move towards the light.",
        "gem" : "Amber in color and is a soruce of light.  A large "
                "form at first seems to be trapped inside, but "
                "looking again, it seems to be a resting place.",
        "form" : "A female demon, with her wings folded around her "
                 "as she slumbers",
    ]));
    set_smell("default", "The smell of demon flesh and dirt.");
   set_listen("default", "A faint sound of a heartbeat pulsing.");
    set_exits( ([
"up" :  ROOMS "/d/guilds/unholy/hall.c",
    ]) );
}
int cmd_start(string str)
{
    if (!str || str=="") 
    {
        notify_fail("Start where?\n");
        return 0;
    }
    if (str!="here")
    {
        notify_fail("You cannot start there.\n");
        return 0;
    }
    if (this_player()!="wildflower")
    {
        notify_fail("You cannot start there.\n");
        return 0;
    }
    this_player()->set_primary_start("/wizards/stormbringer/workroom");
    write("You are now set to start here.");
    return 1;
}
