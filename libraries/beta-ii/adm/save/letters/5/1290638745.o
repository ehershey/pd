#/daemon/letter.c
__Letter "#include <std.h>inherit SPELL;int damage;int cmd_pestilence(string str){        if(this_player()->query_casting()) return notify_fail(\"You are alreadycasting a spell.\\n\");        if(find_call_out(\"first_round\") > 0) return notify_fail(\"\");        write(\"call out : \" + find_call_out(\"first_round\"));        write(\"call out : \" + find_call_out(\"second_round\"));        set_spell_type(\"room\");        set_spoken(\"Poison of the earth, defile my enemies!\");        write(\"You attempt to cast pestilence.\");        write(\"You release a poisonous cloud of pestilence.\");        say(this_player()->query_cap_name() + \" attempts to cast pestilence.\");        say(\"\" + this_player()->query_cap_name() + \" releases a poisonous cloudof pestilence.\");        set_body_damage();        //set_initial_observe(\"\\nA mass of godly powers fall from the heavensand envelops target.\");        set_initial_message(\"A wisk of poison jets through you.\");        //set_message(\"A mass of godly powers fall from the heavens andenvelops you.\");        set_observe_message(\"A wisk of poison jets through target.\");        set_busy_casting();        set_skills_to_use(({\"magic attack\"}));        set_element(\"air\");        damage = calculate_damage();        set_damage(damage);        //this_player()->set_casting(damage); //add this line if you want thespell to use a magic round        set_body_damage(\"head\", 30);        this_player()->set_magic_round();        this_player()->set_casting();        if(find_call_out(\"second_round\") == 1){                call_out(\"first_round\", 1, str);        }        else                 if(!(time()%2)) {                        call_out(\"first_round\", 2, str);                }                else                 {                        call_out(\"first_round\", 1, str);                }                       //do_spell(str);        return 1;}void first_round(string str){        message(\"spell\", \"A cloud of pestilence starts to fill the room.\",environment(this_player()));        call_out(\"second_round\", 2, str);}void second_round(string str){        do_spell(str);}void help(){  write(\"Syntax: <waterfall>\\n\\n\"+        \"Blasts your enemy with a waterfall.\\n\");}"
__Undeleted ({"stormbringer","nulvect",})
