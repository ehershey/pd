#/daemon/letter.c
__Letter "//      _internecion.c//      Mass-attack spell, anti-paladins.//      Wolfspirit.// To configure search paths to cast spell, use // call me;add_search_path;\"/wizards/sakura/spells\"#include <std.h>#include <common_fun.h>#include <sakura.h>inherit DAEMON;    object pyr;    object room;int internecion_cast(){    int i;    int cint;                                 // Caster intelligence.    int cwis;                                 // Caster wisdom.    int catk;                                 // Caster magic attack.    int cfth;                                 // Caster faith.    int twis;                                 // Target wisdom.    int tdef;                                 // Target magic defense.    int result;                               // Final damage.    object *a;                                // Inventory of the Room.    pyr = (object)this_player();    room = environment(pyr);    a = all_inventory(room);    cint=pyr->query_stats(\"intelligence\"); // Caster intelligence.    cwis=pyr->query_stats(\"wisdom\");       // Caster wisdom.    catk=pyr->query_skill(\"magic attack\"); // Caster magic attack.    cfth=pyr->query_skill(\"faith\");        // Caster faith.     for(i=0; i<sizeof(a); i++) {    if (a[i]->query_name() != TP->query_name() && a[i]->is_living())    {    message(\"info\", \"%^BOLD%^%^BLACK%^A sable hand reaches out and passes through %^RED%^\"+a[i]->query_cap_name()+\"%^BLACK%^.%^RESET%^\",room, a[i]);    message(\"info\", \"%^BOLD%^%^BLACK%^A sable hand reaches out and passes through %^RED%^you%^BLACK%^. Searing pain wracks your body.%^RESET%^\",a[i]);if (present(\"dolphin pendant\", this_player()))    twis = a[i]->query_stats(\"wisdom\");    tdef = a[i]->query_skill(\"magic defense\");    result = (random((((cint*4) + (cwis*2) + (catk*2))*2) - (twis/2) - (tdef/4) + 1))/2 + (random((((cint*4) + (cwis*2) + (catk*2))*2) - (twis/2) - (tdef/4) + 1))/2 + (cfth /2);    this_player()->kill_ob(a[i]);    if(TP->query_race(\"demon\") && present(\"amulet of the nether demon\", this_player())) { result = result * 2;}    a[i]->add_hp(-result);    write(\"Debug: Damage is \"+result+\".\");    }    }    this_player()->add_mp(-(random(50)+50));    message(\"room\", \"%^BOLD%^%^BLACK%^The shadows recede into the earth.%^RESET%^\", room);}int cmd_internecion() {    pyr = (object)this_player();    room = environment(pyr);   if(!spell()) { return notify_fail(\"Phht, amateur. Lie down before you hurt yourself.\\n\"); }    if(TP->query_ghost()) {        return notify_fail(\"Fool, you're dead.\\n\");        return 0;    }    if (TP->query_disable()){        return 1;    }    if(environment(TP)->QPP(\"no magic\")) {        return notify_fail(\"Demons can't come if there's no magic in the area, idiot.\\n\");        return 0;    }    if(this_player()->query_mp() < 250) {	return notify_fail(\"You're outta mana and outta luck.\\n\");	return 0;    }    if(TP->query_level() < 60 || TP->query_skill(\"faith\") < 240 || TP->query_skill(\"magic attack\") < 240) {        return notify_fail(\"You're a weakling. Come back when you think you're stronger, you spineless worm.\\n\");	return 0;    }         TP->add_mp(-(random(50) + 50));        TP->set_casting(1);        TP->set_disable(1);	write(\"%^BOLD%^%^BLACK%^You begin to chant softly.%^RESET%^\");        message(\"room\", \"%^BLACK%^\"+this_player()->query_cap_name()+\" begins a soft chant to the powers of evil.%^RESET%^\", room, pyr);	message(\"room\", \"%^BOLD%^%^BLACK%^Thick black shadows fill the room.%^RESET%^\", room);    if(TP->query_race(\"demon\") && present(\"amulet of the nether demon\", this_player())) {write(\"%^RED%^Your Amulet of the Nether Demon glows a vicious crimson.%^RESET%^\");}        internecion_cast();}void help() {    write(\"Syntax: <internection>\\n\\n\"+        \"This spell is for the most powerful antipaladins in the land. It allows them to call upon the evil shadows of the realm to aid them in combat. However, evil is an unpredictable thing, and as such it's results can be somewhat... unexpected. It is a spell best used with caution.\\n\");}int spell() {   if (!TP) return 0;   if (TP->query_subclass() != \"antipaladin\") return 0;   return 1;}"
__Undeleted ({"sasayaki",})
